<html>
<head>
    <title>Writing Task</title>

    <script src="js/jquery.min.js"> </script>
    <script src="js/underscore.js"> </script>
    <link href="css/style.css" rel="stylesheet" type="text/css"></link>    
    <script src="js/questions.js"></script>
    <script>
        //$("#answer_text").autogrow();
        
        function recordAnswer(){
            var answer = $("#answer_text").val()
            
            if (wordCount(answer)>min_nr_words){
                $("#completion_code").html(code)
                $("#completion_message").show()
                $("#answer").hide()
                $("#instructions").hide()
            }
            else{
                $("#too_short").show()
                $("#answer").hide()
                //$("#nr_words").html(min_nr_words)
            }
        }
        
        function wordCount(str) { 
            return str.split(" ").length;
        }
        
    </script>
</head>
    
<body>
    
    <script>
        // Set parameter values
      
        //set default values
        number=0

        //update parameters according to query string   
        if (location.search!=''){
            parameters=location.search.substring(1).split('&')
            
            for (par=0; par<parameters.length; par++){
                if (parameters[par].slice(0,6)=='number'){
                    eval(unescape(parameters[par]))    
                    number=number-1
                }
                
                if (parameters[par].slice(0,4)=='code'){
                    eval(unescape(parameters[par]))    
                }
            }
        }
        
        min_nr_words_by_task=[100,100,100,100,50]
        
        min_nr_words=min_nr_words_by_task[number]
        
        procrastination_tasks=[12,4,19,20,0];
        
    </script>

<div id = "instructions" class='block-text'>
    
    <!-- <strong>Please complete the following writing assignment in the text box below.</strong> -->
    
    <div id = "question" class='question'> </div>


    
<div class='warning'>
    Your text should be original and of the highest quality. If you copy from a different source, then your submission will be rejected.
</div>
</div>
    
<div id="answer" > <!-- style="display:none;" -->
<!--  <h1>Answer</h1> -->
<div align="center">    

<!--
<form action="https://todo-list-study.herokuapp.com/submit_text/" method= "post">

    
        <textarea name="response[text]" rows="25" cols="75" id="answer_text">
    
        </textarea>
    
        <input type="submit" name="Submit" value="test"> 
    
    </form>        
-->
    <textarea name="response[text]" rows="25" cols="75" id="answer_text"></textarea>
    <div align="center"><button align="center" onclick="recordAnswer()">  Submit  </button></div>
    
</div>
    
</div>
    
<div class='hint' style='display:none' id='completion_message'>
    Thank you! Your response has been recorded and will be graded when you submit the HIT.
    
    The code for checking off this writing assignment from your todo list is <strong><span id="completion_code"></span></strong>.
    
    Please copy this code and paste it into the text box below the assignment. A green button with the caption <strong>Finish Activity</strong> will appear at the bottom of the page. Please make sure to click it to check off the task from your todo list.
    
    If your response does not meet the requirements of this assignments then you will lose some or all of your bonus.
    
</div>   
    
<div class='warning' style='display:none' id='too_short'>
    <b>Your response is too short. You have to elaborate your response further before your can submit this assignment.</b>    
    
    <button onclick="$('#too_short').hide(); $('#answer').show()">Okay, I will revise my response.</button>
    
</div>   
    
        
<script>    
        
        task_index=number
        $("#question").html(questions[procrastination_tasks[task_index]])
    
</script>
    
    
</body>

</html>